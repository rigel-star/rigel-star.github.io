<!DOCTYPE html>
<html>
<head>
	<title>Grayscaling the image programatically</title>

	<style type="text/css">

		#post {
			font-size: 20px;
			color: black;
		}

		#code {

			background-color: rgb(255, 255, 255);
			color: black;
			font-size: 20px;
			border-style: dashed;
			align-items: center;
			border-width: 1px;
			font-family: monospace;
		}

	</style>

</head>
<body>


	<div id="post">
		
		Editing image the way you want is easy as hell this days. But actually what happens behind the scene when you edit image is mystery. Even the simple filter like grayscaling the image deals with some math behind the scenes. Softwares like Photoshop, GIMP and mobile applications like Instagram do some advanced operaions very easily. I'm going to write some articles discussing various filters and techniques of this applications.

		Let's start by simply gray scaling the image. I'm going to write code in Java but you can easily implement this code in other languages easily.

		We will start by reading each image pixels in image. In Java we use <b>BufferedImage</b> to represent image object. <p>

		<div id="code">
			
			BufferedImage src = null;<br>
<br>
			try{<br>
				src = ImageIO.read(new File("Your file path here..."));<br>
			} catch (IOException ex){<br>
				ex.printStackTrace();<br>
			}<br>
<br>
			/*ImageIO throws IOException if file not found.<br>*/
		</div>

		<br>Next step will be to iterate over every pixels in image.<p>

		<div id="code">
			
			int height = src.getHeight();<br>
			int width = src.getWidth();<br>

		</div>

		<br>Basic nested for loop will be used to iterate over pixels.<p>

		<div id="code">
			
			for(int x=0; x < width; x++){<br>
				for(int y=0; y < height; y++){<br>
												<br>
				}<br>
			}<br>

		</div>


		<br>
		Class <b>Color</b> represents the Color object in Java. <b>BufferedImage</b> has a method called <b>getRGB(x, y)</b>, which returns <b>int</b> value containing rgb color value of specific x, y pixel. We will do bitwise operation to extract each <b>R, G, B</b> value from that pixel. Otherwise you can just use <b>Color</b>'s getRed(), getGreen(), getBlue() methods to extract color without doing bitwise operations. But in the name of learning I will do bitwise.<p>


		<div id="code">
			
			for(int x=0; x < width; x++){<br>
				for(int y=0; y < height; y++){<br>
				
					int c = src.getRGB(x, y);<br>
					int r = c >> 16 & 255; //extracting red<br>
					int g = c >> 8 & 255; //extracting green<br>
					int b = c >> 0 & 255; //extracting blue<br>

					<br>
					//multiplying red with 0.2126, green with 0.7152 and blue with 0.0722 gives the gray scale value of that color.<p>

					final int grayColor = (int)(0.2126 * r + 0.7152 * g + 0.0722 * b);<p>

					//finally decode color using bitwise operation<p>

					r = (grayColor << 16);<br>
	            	g = (grayColor << 8);<br>
	            	b = grayColor;<br>
<br>
	            	Color color = new Color(r+g+b, r+g+b, r+g+b);<br>

	            	<br>
					//Finally use <b>BufferedImage</b>'s <b>setRGB</b> method to set color on specific (x, y) pixel in image.<p>

					src.setRGB(x, y, color.getRGB());//x, y are from nested for loops<br>

				}<br>
			}<br>

		</div>

		<br>
		It is all done. Now you can save this image file or upload to the server or do whatever you want. Stay tuned for many more articles on <b>Image Processing, Computer Graphics, Maths, Physics etc.
	</div>

</body>
</html>